(function(e){e.preLoadImages=function(t,n){var r=[],i,s,o=0;if(typeof t!="undefined"){if(e.isArray(t)){s=t.length;for(i=0;i<s;i++){r[i]=new Image;r[i].onload=function(){o++;if(o==s){if(e.isFunction(n)){n()}}};r[i].src=t[i]}}else{r[0]=new Image;if(e.isFunction(n)){r[0].onload=n}r[0].src=t}}else if(e.isFunction(n)){n()}r=undefined};e.preLoadCSSImages=function(t){var n=[],r,i=[],s=0,o,u=/url\((?:"|')?(?!data:)([^)"']+)(?:"|')?\)/i,a;var f=document.styleSheets,l,c="",h,p,d,v,m,g;for(m=0;m<f.length;m++){var y=f[m];if(typeof y.href=="string"&&y.href.length>0){a=y.href.split("/");a.pop();l=a.join("/")+"/"}else{l="./"}if(y.cssRules){c=y.cssRules}else if(y.rules){c=y.rules}if(c.length>0){for(g=0;g<c.length;g++){h=c[g];d=h.cssText?h.cssText:h.style.cssText;d=e.trim(d);if("@"===d.substr(0,1)){continue}p=u.exec(d);if(p!=null){v=p[1];if(v.substring(0,4)=="http"){i[i.length]=v}else if(p[1].substring(1,2)=="/"){var b=l.split("/");b.pop();b.pop();p2x=b.join("/");i[i.length]=p2x+v}else{i[i.length]=l+v}}}}}o=i.length;if(o>0){for(r=0;r<o;r++){n[r]=new Image;n[r].onload=function(){s++;if(s==o){if(e.isFunction(t)){t()}}};n[r].src=i[r]}}else if(e.isFunction(t)){t()}};e.preLoadCssImages=e.preLoadCSSImages;e.preLoadAllImages=function(t,n){if(typeof t!="undefined"){if(e.isFunction(t)){n=t}else if(!e.isArray(t)){t=[t]}}e.preLoadCSSImages(function(){if(t.length>0){e.preLoadImages(t,n)}else{n()}})}})(jQuery)


