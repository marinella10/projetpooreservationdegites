!function(a){a.fn.dateRangePicker=function(t,d){d=a.extend({},d);var e={};e="function"==typeof dateRangePicker_setRegional?dateRangePicker_setRegional():{monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNameShort:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],dayName:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dayNameShort:["Mo","Tu","We","Th","Fr","Sa","Su"],placeholderStart:"Arrival",placeholderEnd:"Departure",placeholderDuration:"Duration",dateFormat:"DD MMM YYYY",processFormat:"MM/DD/YYYY"},t=a.extend(e,t);var r,n,p;t=a.extend({initStart:null,initEnd:null,idStart:"input-drp-start-id",idEnd:"input-drp-end-id",idDuration:"input-drp-duration-id",nameStart:"input-drp-start-name",nameEnd:"input-drp-end-name",classStart:"input-drp-start-class",classEnd:"input-drp-end-class",previousButton:'<svg width="44" height="34"><polygon points="32,17 12,17 17,12 12,17 17,22 12,17" style="stroke:grey;stroke-width:1;" /></svg>',nextButton:'<svg width="44" height="34"><polygon points="12,17 32,17 27,12 32,17 27,22 32,17" style="stroke:grey;stroke-width:1;" /></svg>',separator:'<svg class="ui-drp-arrow" width="30" height="30"><polygon points="5,15 25,15 20,10 25,15 20,20 25,15" style="stroke:grey;stroke-width:1;" /></svg>',clearCross:'<svg class="ui-drp-clear-cross" width="30" height="30"><polygon points="10,10 20,20 15,15 20,10 10,20 15,15" style="stroke:black;stroke-width:2;" /></svg>',validationCross:'<svg class="ui-drp-validation-cross" width="30" height="30"><polygon points="10,10 20,20 15,15 20,10 10,20 15,15" style="stroke:black;stroke-width:2;" /></svg>',picto:'<img src="drp-picto.png" class="ui-drp-picto">',minDate:null,maxDate:null,allowPrevious:!0,allowFuture:!0,forceDeparture:!1,durationInput:!1,readonly:!1,smartDisplay:!1,askValidation:!1,preloadedMonths:null,headerText:null,firstWeekDay:5,maxRange:28,nbMonths:2,forceDepartureSelection:!1},t),n=a(this),p={},a.each(n[0].attributes,function(a,t){p[t.name]=t.value}),r=p,a.each(t,function(i,d){a.each(r,function(a,d){i.toLowerCase()===a&&(t[i]=r[a]),"data-start"===a&&(t.initStart=r[a]),"data-end"===a&&(t.initEnd=r[a]),"min-start"===a&&(t.minDate=new Date(r[a])),"max-end"===a&&(t.maxDate=new Date(r[a]))})}),t.idMain=a(this).attr("id"),t.idPopup=t.idMain+"-ui-drp",t.idFade=t.idMain+"-ui-fade",t.dateSeparator=c(t.dateFormat),t.dateTokens=v(t.dateFormat,t.dateSeparator),t.processSeparator=c(t.processFormat),t.processTokens=v(t.processFormat,t.processSeparator),t.isMobile=!1;var o=0,s=P(),u=P(),l='<div class="drp-start-container"><input drp="true" id="input-drp-arrival-id" class="'+t.classStart+'" name="input-drp-arrival-name" type="text" placeholder="'+t.placeholderStart+'"><input id="'+t.idStart+'" name="'+t.nameStart+'" type="hidden"></div>'+t.separator+'<div class="drp-end-container"><input drp="true" id="input-drp-departure-id" class="'+t.classEnd+'" name="input-drp-departure-name" type="text" placeholder="'+t.placeholderEnd+'"><input id="'+t.idEnd+'" name="'+t.nameEnd+'" type="hidden"></div>'+t.picto;function c(a){for(var t=["/","-","."," "],i=0;i<t.length;i++)if(tab=a.split(t[i]),3===tab.length)return t[i]}function v(a,t){return a.split(t)}function h(){if(0===T()&&!0===t.forceDeparture&&(a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0),0===o?(a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-departure-id").removeClass("drp-selecting"),S("#"+t.idMain+" #input-drp-departure-id",-(t.maxRange+1))):(a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-arrival-id").removeClass("drp-selecting"),S("#"+t.idMain+" #input-drp-arrival-id",t.maxRange+1)),a("#"+t.idPopup).length)return!1;t.smartDisplay||(M("#"+t.idMain+" #input-drp-departure-id"),M("#"+t.idMain+" #input-drp-arrival-id")),function(){var i='<div id="'+t.idPopup+'" class="ui-drp-popup"><div class="ui-drp-main-header">';t.headerText&&(i+='<div class="ui-drp-main-header-text">'+t.headerText+"</div>");t.smartDisplay&&(i+='<div class="smart-display-container"><input id="smart-display-arrival-id" class="drp-smart-display" placeholder="'+t.placeholderStart+'" readonly="readonly"><input id="smart-display-departure-id" class="drp-smart-display" placeholder="'+t.placeholderEnd+'" readonly="readonly"></div>');i+='</div><div class="ui-drp-board"></div></div><div id="'+t.idFade+'" class="ui-drp-fade"></div>',a("#"+t.idMain).css({"z-index":"99999"}),a("body").append(i).addClass("drp-active"),a("#"+t.idFade).fadeIn(),a(window).resize(f),f(),t.preloadedMonths&&(C("ui-drp-main-header"),a("#"+t.idPopup+" .ui-drp-board").css({"overflow-y":"scroll","overflow-x":"hidden",height:"315px",width:"350px"}))}(),g(),function(){for(var i=0,d=0;d<t.nbMonths;d++)i+=a("#"+t.idPopup+" table[index="+d+"] tr").length;i/t.nbMonths>5?a("#"+t.idPopup).css({height:"358px"}):a("#"+t.idPopup).css({height:"315px"})}(),a("#"+t.idFade).click(function(){t.askValidation&&A()&&W(),O()}),t.smartDisplay&&function(){a("#"+t.idPopup+" #smart-display-arrival-id").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").click()}),a("#"+t.idPopup+" #smart-display-departure-id").click(function(){a("#"+t.idMain+" #input-drp-departure-id").click()}),w("#input-drp-arrival-id","#smart-display-arrival-id"),w("#input-drp-departure-id","#smart-display-departure-id");var i=a("#"+t.idPopup+" .drp-start").offset();i&&a("#"+t.idPopup+" .ui-drp-board").animate({scrollTop:i.top-a("#"+t.idPopup+" .ui-drp-panel").height()-a("#"+t.idPopup+" .ui-drp-main-header").height()},800)}(),t.askValidation&&function(){a("#"+t.idPopup+" .ui-drp-main-header").append(t.validationCross),a("#"+t.idPopup+" .ui-drp-validation-cross").click(function(){A()&&W(),O()}),a("#"+t.idPopup).append('<div class="ui-drp-main-footer">'),a("#"+t.idPopup+" .ui-drp-main-footer").append('<button class="ui-drp-main-footer-button">Valider</button>'),3!==T()&&a("#"+t.idPopup+" .ui-drp-main-footer-button").attr("disabled","disabled");a("#"+t.idPopup+" .ui-drp-main-footer-button").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").attr("validated-date",a("#"+t.idMain+" #input-drp-arrival-id").val()),a("#"+t.idMain+" #input-drp-departure-id").attr("validated-date",a("#"+t.idMain+" #input-drp-departure-id").val()),a("#"+t.idMain+" #"+t.idStart).attr("validated-date",a("#"+t.idMain+" #"+t.idStart).val()),a("#"+t.idMain+" #"+t.idEnd).attr("validated-date",a("#"+t.idMain+" #"+t.idEnd).val()),O()})}(),"function"==typeof d.openingPopup&&d.openingPopup()}function M(a){t.minDate>P()&&(s.setMonth(t.minDate.getMonth()),s.setFullYear(t.minDate.getFullYear()));var i=E(a,t.dateTokens,t.dateSeparator);if(I(i)){var d=new Date(i[2],i[1],i[0]);s.setMonth(d.getMonth()),s.setFullYear(d.getFullYear())}}function f(){var i,d,e=a("#"+t.idMain).offset();e.top+=a("#"+t.idMain).height()+10,t.panelWidth=(i=a('<div class="ui-drp-panel"></div>').appendTo("#"+t.idPopup),d=i.innerWidth(),i.remove(),d),t.preloadedMonths?a("#"+t.idPopup).fadeIn().css({top:e.top,left:e.left}):a("#"+t.idPopup).fadeIn().css({top:e.top,left:e.left,width:t.panelWidth*t.nbMonths})}function g(){if(t.preloadedMonths)for(var i=0;i<t.preloadedMonths;i++){m((e=new Date(s.getFullYear(),s.getMonth()+i)).getMonth(),e.getFullYear(),null,null)}else{!function(){if(a("#"+t.idPopup+" .ui-drp-board").append('<div class="ui-drp-next-month">'+t.nextButton),!1===t.allowPrevious){var i=new Date;if(s.getMonth()==i.getMonth()&&s.getFullYear()==i.getFullYear())return}a("#"+t.idPopup+" .ui-drp-board").append('<div class="ui-drp-previous-month">'+t.previousButton)}();for(i=-1;i<t.nbMonths+1;i++){var e;m((e=new Date(s.getFullYear(),s.getMonth()+i)).getMonth(),e.getFullYear(),i*t.panelWidth,i)}!function(){if(t.isMobile&&!t.preloadedMonths){var i,d;a("#"+t.idPopup+" .ui-drp-panel").bind("touchstart",function(a){i=a.originalEvent.changedTouches[0].pageX}),a("#"+t.idPopup+" .ui-drp-panel").bind("touchend",function(e){i&&(d=e.originalEvent.changedTouches[0].pageX,i>d+30?_():i<d-30&&a("#"+t.idPopup+" .ui-drp-previous-month").length&&j())})}a("#"+t.idPopup+" .ui-drp-previous-month").unbind("click").click(function(){a("#"+t.idPopup+" .ui-drp-previous-month").unbind("click"),j()}),a("#"+t.idPopup+" .ui-drp-next-month").unbind("click").click(function(){a("#"+t.idPopup+" .ui-drp-next-month").unbind("click"),_()})}()}a("#"+t.idPopup+" .ui-drp-today, #"+t.idPopup+" .ui-drp-default").click(function(){if(a(this).hasClass("ui-drp-out-of-range"))"function"==typeof d.clickOutOfRange&&d.clickOutOfRange();else{var i=Y(a(this).text(),a(this).attr("data-month"),a(this).attr("data-year"),t.dateTokens,t.dateSeparator),e=Y(a(this).text(),a(this).attr("data-month"),a(this).attr("data-year"),t.processTokens,t.processSeparator),r=T(),n=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),p=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator),s=new Date(n[2],n[1],n[0]),u=new Date(p[2],p[1],p[0]),l=new Date(a(this).attr("data-year"),a(this).attr("data-month"),a(this).text());1===o&&0===r&&!0===t.forceDeparture&&(o=0),(a(this).hasClass("ui-drp-default")||a(this).hasClass("ui-drp-today"))&&(0===o?(!0===t.forceDepartureSelection&&(X(),r=0),0===r?B(i,e):1===r?(J(),B(i,e)):2===r?(l.getTime()>=u.getTime()&&z(),B(i,e)):3===r&&(l.getTime()>=u.getTime()&&X(),B(i,e))):1===o&&(0===r?V(i,e):2===r?(z(),V(i,e)):1===r?(l.getTime()<=s.getTime()&&J(),V(i,e)):3===r&&(l.getTime()<=s.getTime()&&X(),V(i,e)))),x(r=T()),3===r?t.askValidation?b():O():1===r?(a("#"+t.idMain+" #input-drp-departure-id").focus(),o=1,b()):2===r&&(a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,b())}}),a("#"+t.idPopup+" .ui-drp-default, .ui-drp-today").mouseenter(function(){var i=T();if(i>0){var e=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),r=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator),n=new Date(e[2],e[1],e[0]),p=new Date(r[2],r[1],r[0]);if(1===i){if(0===o)return;var s=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],u=new Date(s[2],s[1],s[0]),l=y(e,s,0);if(l)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());e[0]++,u>n&&a("#"+t.idPopup).addClass("drp-available");for(var c=new Date(e[2],e[1],e[0]);c<=u;c.setDate(c.getDate()+1))a("#"+t.idPopup+" td[data-day="+c.getDate()+"][data-month="+c.getMonth()+"][data-year="+c.getFullYear()+"]").addClass("ui-drp-dynamicrange")}else if(2===i){if(1===o)return;var v=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],h=new Date(v[2],v[1],v[0]),M=y(r,v,1);if(M)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());r[0]--,h<p&&a("#"+t.idPopup).addClass("drp-available");for(var f=new Date(r[2],r[1],r[0]);f>=h;f.setDate(f.getDate()-1))a("#"+t.idPopup+" td[data-day="+f.getDate()+"][data-month="+f.getMonth()+"][data-year="+f.getFullYear()+"]").addClass("ui-drp-dynamicrange")}else if(3===i)if(0===o){e[0]++;var s=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],u=new Date(s[2],s[1],s[0]),l=y(r,s,1);if(l)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());u<p&&a("#"+t.idPopup).addClass("drp-available"),a(this).addClass("ui-drp-dynamicrange")}else if(1===o){r[0]--;var v=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],h=new Date(v[2],v[1],v[0]),M=y(e,v,0);if(M)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());h>n&&a("#"+t.idPopup).addClass("drp-available"),a(this).addClass("ui-drp-dynamicrange")}}}).mouseleave(function(){a("#"+t.idPopup+" .ui-drp-default, .ui-drp-today").removeClass("ui-drp-dynamicrange"),a("#"+t.idPopup).removeClass("drp-unavailable").removeClass("drp-available")}),b()}function m(i,d,e,r){var n,p=(n=new Date(d,i,1).getDay())>0?--n:6,o=D(i,d);a("#"+t.idPopup+" .ui-drp-board").append('<div class="ui-drp-panel">'),function(i,d){var e='<div class="ui-drp-header"><span class="ui-drp-month">'+t.monthName[i]+" "+d+"</span></div>";a("#"+t.idPopup+" .ui-drp-panel:last").append(e)}(i,d),null!=e?(C("ui-drp-panel:last"),a("#"+t.idPopup+" .ui-drp-panel:last").append('<div class="ui-drp-table">').css({position:"absolute",left:e}),a("#"+t.idPopup+" .ui-drp-table:last").append('<table class="ui-drp-calendar" index="'+r+'">')):a("#"+t.idPopup+" .ui-drp-panel:last").append('<div class="ui-drp-table"><table class="ui-drp-calendar"></table></div>');for(var s=1,l=((p=(p+7-t.firstWeekDay)%7)+o)/7,c=0;c<l;c++){a("#"+t.idPopup+" .ui-drp-calendar:last").append("<tr>");for(var v=0;v<=6;v++)0===c&&v<p?k(null,i,d,o,u):s>o?k(null,i,d,o,u):(k(s,i,d,o,u),s++)}}function y(a,i,d){var e=new Date(a[2],a[1],a[0]),r=new Date(i[2],i[1],i[0]),n=e;return!(0===d&&(n=n.setDate(e.getDate()+(t.maxRange+1)))>r)&&!(1===d&&(n=n.setDate(e.getDate()-(t.maxRange+1)))<r)}function D(a,t){return 11===a?31:new Date(t,a+1,0).getDate()}function P(){return new Date((new Date).toDateString())}function C(i){for(var d='<div class="ui-drp-week"><table class="ui-drp-week-table"><tr>',e=0;e<=6;e++)d+='<td class="ui-drp-week-days">'+t.dayNameShort[(e+t.firstWeekDay)%7]+"</td>";d+="</tr></table></div>",a("#"+t.idPopup+" ."+i).append(d)}function k(i,d,e,r,n){var p=null,o=new Date(e,d,i);p=null===i?'<td class="ui-drp-other-month"><span></span></td>':!1===t.allowPrevious&&o<n||t.minDate&&o<t.minDate?'<td class="ui-drp-passed" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>":!1===t.allowFuture&&o>n||t.maxDate&&o>t.maxDate?'<td class="ui-drp-future" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>":i===n.getDate()&&d===n.getMonth()&&e===n.getFullYear()?'<td class="ui-drp-today" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>":'<td class="ui-drp-default" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>",a("#"+t.idPopup+" tr:last").append(p),1===i?a("#"+t.idPopup+" td:last").addClass("ui-drp-first-day"):i===r&&a("#"+t.idPopup+" td:last").addClass("ui-drp-last-day")}function b(){0===T()&&!0===t.forceDeparture&&(a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0),0===o?(a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-departure-id").removeClass("drp-selecting")):(a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-arrival-id").removeClass("drp-selecting"));var i=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator);I(i)||(a("#"+t.idMain+" #input-drp-arrival-id").val(null),a("#"+t.idMain+" #"+t.idStart).val(null),a("#"+t.idMain+" #"+t.idDuration).val(null),a("#"+t.idMain+" .drp-start-chosen").removeClass("drp-start-chosen"));var d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);I(d)||(a("#"+t.idMain+" #input-drp-departure-id").val(null),a("#"+t.idMain+" #"+t.idEnd).val(null),a("#"+t.idMain+" #"+t.idDuration).val(null),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen")),I(i)&&I(d)&&function(i,d){var e,r,n;r=new Date(i[2],i[1],i[0]);var p=(((n=new Date(d[2],d[1],d[0]))-r)/864e5).toFixed();p<=t.maxRange?a("#"+t.idMain+" #"+t.idDuration).val(p):a("#"+t.idMain+" #"+t.idDuration).val(null),r>n&&(e=i,i=d,d=e,e=a("#"+t.idMain+" #input-drp-arrival-id").val(),a("#"+t.idMain+" #input-drp-arrival-id").val(a("#"+t.idMain+" #input-drp-departure-id").val()),a("#"+t.idMain+" #input-drp-departure-id").val(e),e=a("#"+t.idMain+" #"+t.idStart).val(),a("#"+t.idMain+" #"+t.idStart).val(a("#"+t.idMain+" #"+t.idEnd).val()),a("#"+t.idMain+" #"+t.idEnd).val(e)),y(i,d,0)&&(a("#"+t.idMain+" #input-drp-departure-id").val(null),a("#"+t.idMain+" #"+t.idEnd).val(null),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen"))}(i,d);var e=T();if(e>0&&!0===t.durationInput&&0===a("#"+t.idMain+" #"+t.idDuration).length?(a("#"+t.idMain).append('<input duration="true" id="'+t.idDuration+'" type="text" placeholder="'+t.placeholderDuration+'" />'),a("#"+t.idMain+" #"+t.idDuration).click(function(){h()})):0===e&&a("#"+t.idMain+" #"+t.idDuration).remove(),e>0&&0===a("#"+t.idMain+" .ui-drp-clear-cross").length?(a("#"+t.idMain+" .ui-drp-picto").remove(),a("#"+t.idMain).append(t.clearCross),N()):0===e&&(a("#"+t.idMain+" .ui-drp-clear-cross").remove(),a(".ui-drp-picto").length||(a("#"+t.idMain).append(t.picto),a("#"+t.idMain+" .ui-drp-picto").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,h()}))),e>0&&(1===o?S("#"+t.idMain+" #input-drp-arrival-id",t.maxRange+1):S("#"+t.idMain+" #input-drp-departure-id",-(t.maxRange+1))),3===e?a("#"+t.idPopup).addClass("drp-selected"):a("#"+t.idPopup).removeClass("drp-selected"),a("#"+t.idMain+" #"+t.idDuration).unbind("keyup").keyup(function(t){13===t.keyCode&&(R(a(this).val()),x(e))}).focusout(function(){a(this).unbind("focusout"),R(a(this).val()),x(e)}),a("#"+t.idPopup+" .ui-drp-range").removeClass("ui-drp-range"),a("#"+t.idPopup+" .ui-drp-dynamicrange").removeClass("ui-drp-dynamicrange"),a("#"+t.idPopup+" .ui-drp-selected").removeClass("drp-end").removeClass("drp-start").removeClass("ui-drp-selected"),(a("#"+t.idPopup+" td[data-day="+i[0]+"][data-month="+i[1]+"][data-year="+i[2]+"]").hasClass("ui-drp-default")||a("#"+t.idPopup+" td[data-day="+i[0]+"][data-month="+i[1]+"][data-year="+i[2]+"]").hasClass("ui-drp-today"))&&a("#"+t.idPopup+" td[data-day="+i[0]+"][data-month="+i[1]+"][data-year="+i[2]+"]").addClass("ui-drp-selected").addClass("drp-start"),(a("#"+t.idPopup+" td[data-day="+d[0]+"][data-month="+d[1]+"][data-year="+d[2]+"]").hasClass("ui-drp-default")||a("#"+t.idPopup+" td[data-day="+d[0]+"][data-month="+d[1]+"][data-year="+d[2]+"]").hasClass("ui-drp-today"))&&a("#"+t.idPopup+" td[data-day="+d[0]+"][data-month="+d[1]+"][data-year="+d[2]+"]").addClass("ui-drp-selected").addClass("drp-end"),3===e){i[0]++;for(var r=new Date(d[2],d[1],d[0]),n=new Date(i[2],i[1],i[0]);n<r;n.setDate(n.getDate()+1))a("#"+t.idPopup+" td[data-day="+n.getDate()+"][data-month="+n.getMonth()+"][data-year="+n.getFullYear()+"]").addClass("ui-drp-range")}}function S(i,d){if(""!==a(i).val()){var e=E(i,t.dateTokens,t.dateSeparator),r=new Date(e[2],e[1],e[0]);if(d>0){a("#"+t.idPopup+" td").addClass("ui-drp-out-of-range");for(var n=0;n<d;n++)a("#"+t.idPopup+" td[data-day="+r.getDate()+"][data-month="+r.getMonth()+"][data-year="+r.getFullYear()+"]").removeClass("ui-drp-out-of-range"),r=new Date(r.setDate(r.getDate()+1))}else{a("#"+t.idPopup+" td").addClass("ui-drp-out-of-range");for(n=0;n>d;n--)a("#"+t.idPopup+" td[data-day="+r.getDate()+"][data-month="+r.getMonth()+"][data-year="+r.getFullYear()+"]").removeClass("ui-drp-out-of-range"),r=new Date(r.setDate(r.getDate()-1))}!function(i){if(""===a("#"+t.idMain+" #input-drp-arrival-id").val()&&""===a("#"+t.idMain+" #input-drp-departure-id").val())return;if(i>0){var d=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),e=new Date(d[2],d[1],d[0]);a("#"+t.idPopup+" td").filter(function(){return a(this).attr("data-year")<e.getFullYear()||(a(this).attr("data-month")<e.getMonth()||a(this).attr("data-year")==e.getFullYear()&&a(this).attr("data-month")==e.getMonth()&&a(this).attr("data-day")<e.getDate())}).removeClass("ui-drp-out-of-range")}else{var d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator),e=new Date(d[2],d[1],d[0]);a("#"+t.idPopup+" td.ui-drp-default").filter(function(){return a(this).attr("data-year")>e.getFullYear()||(parseInt(a(this).attr("data-month"))>parseInt(e.getMonth())||a(this).attr("data-year")==e.getFullYear()&&a(this).attr("data-month")==e.getMonth()&&a(this).attr("data-day")>e.getDate())}).removeClass("ui-drp-out-of-range")}}(d)}}function w(i,d){var e=a("#"+t.idMain+" "+i).val();e?a("#"+t.idPopup+" "+d).val(e).addClass("drp-smart-select"):a("#"+t.idPopup+" "+d).val(e).removeClass("drp-smart-select")}function x(i){1===i&&(t.smartDisplay&&w("#input-drp-arrival-id","#smart-display-arrival-id"),"function"==typeof d.selectedStart&&d.selectedStart()),2===i&&(t.smartDisplay&&w("#input-drp-departure-id","#smart-display-departure-id"),"function"==typeof d.selectedEnd&&d.selectedEnd()),3===i&&(t.smartDisplay&&(w("#input-drp-arrival-id","#smart-display-arrival-id"),w("#input-drp-departure-id","#smart-display-departure-id")),t.askValidation&&a("#"+t.idPopup+" .ui-drp-main-footer-button").removeAttr("disabled"),"function"==typeof d.selectedRange&&d.selectedRange())}function T(){var a,i=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);return 3!==i.length&&3!==d.length?a=0:3===i.length&&3!==d.length?a=1:3!==i.length&&3===d.length?a=2:3===i.length&&3===d.length&&(a=3),a}function F(a){return parseInt(a)<10?"0"+a:a}function Y(a,d,e,r,n){var p=new Array;for(i=0;i<r.length;i++)"YYYY"===r[i]?p[i]=parseInt(e):"YY"===r[i]?p[i]=parseInt(e)-2e3:"M"===r[i]?p[i]=parseInt(d)+1:"MM"===r[i]?p[i]=F(parseInt(d)+1):"MMM"===r[i]?p[i]=t.monthNameShort[parseInt(d)]:"MMMM"===r[i]?p[i]=t.monthName[parseInt(d)]:"D"===r[i]?p[i]=parseInt(a):"DD"===r[i]&&(p[i]=F(parseInt(a)));return p[0]+n+p[1]+n+p[2]}function E(i,d,e){var r=a(i).val(),n=r.split(e);if(3===n.length){for(var p=new Array,o=0;o<n.length;o++)"YYYY"===d[o]?p[2]=parseInt(n[o]):"YY"===d[o]?p[2]=2e3+parseInt(n[o]):"M"===d[o]||"MM"===d[o]?p[1]=parseInt(n[o])-1:"MMM"===d[o]?p[1]=t.monthNameShort.indexOf(n[o]):"MMMM"===d[o]?p[1]=t.monthName.indexOf(n[o]):"D"!==d[o]&&"DD"!==d[o]||(p[0]=parseInt(n[o]));return p}return r}function I(a){if(3!==a.length||isNaN(a[0])||isNaN(a[1])||isNaN(a[2]))return!1;if(a[1]<0||a[1]>11)return!1;var i=D(a[1],a[2]);if(a[0]<1||a[0]>i)return!1;var d=new Date(a[2],a[1],a[0]);return!(!1===t.allowPrevious&&d<u)&&(!(!1===t.allowFuture&&d>u)&&(!(t.minDate&&d<t.minDate)&&!(t.maxDate&&d>t.maxDate)))}function O(){b(),"function"==typeof d.closingPopup&&d.closingPopup(),a("body").removeClass("drp-active"),a("#"+t.idMain+":focus").blur(),a("#"+t.idMain+" #input-drp-arrival-id").removeClass("drp-selecting"),a("#"+t.idMain+" #input-drp-departure-id").removeClass("drp-selecting"),a("#"+t.idFade+", #"+t.idPopup).fadeOut(function(){a("#"+t.idMain).css({"z-index":"initial"}),a("#"+t.idPopup).remove(),a("#"+t.idFade).remove()})}function R(i){if(isNaN(i)||parseInt(i)<0||parseInt(i)>t.maxRange)a("#"+t.idMain+" #"+t.idDuration).val(null);else{if(1===o){var d=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator);if((e=new Date(d[2],d[1],d[0])).setDate(e.getDate()+parseInt(i)),!I([e.getFullYear(),e.getMonth(),e.getDate()]))return void a("#"+t.idMain+" #"+t.idDuration).val(null).removeClass("drp-start-chosen");a("#"+t.idMain+" #input-drp-departure-id").val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.dateTokens,t.dateSeparator)).addClass("drp-end-chosen"),a("#"+t.idMain+" #"+t.idEnd).val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.processTokens,t.processSeparator))}else{var e;d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);if((e=new Date(d[2],d[1],d[0])).setDate(e.getDate()-parseInt(i)),!I([e.getFullYear(),e.getMonth(),e.getDate()]))return void a("#"+t.idMain+" #"+t.idDuration).val(null).removeClass("drp-start-chosen");a("#"+t.idMain+" #input-drp-arrival-id").val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.dateTokens,t.dateSeparator)).addClass("drp-start-chosen"),a("#"+t.idMain+" #"+t.idStart).val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.processTokens,t.processSeparator))}b()}}function N(){a("#"+t.idMain+" .ui-drp-clear-cross").unbind("click").click(function(){W(),a("#"+t.idPopup+" .ui-drp-selected").removeClass("drp-start").removeClass("drp-end").removeClass("ui-drp-selected"),a("#"+t.idPopup+" .ui-drp-range").removeClass("ui-drp-range"),a("#"+t.idPopup+" .ui-drp-out-of-range").removeClass("ui-drp-out-of-range"),a("#"+t.idMain).append(t.picto),a("#"+t.idMain+" .ui-drp-picto").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,h()}),a("#"+t.idPopup).length&&b()})}function A(){var i=a("#"+t.idMain+" #"+t.idStart).attr("validated-date"),d=a("#"+t.idMain+" #"+t.idEnd).attr("validated-date");return!i&&!d||(a("#"+t.idMain+" #"+t.idStart).val(i),a("#"+t.idMain+" #"+t.idEnd).val(d),a("#"+t.idMain+" #input-drp-arrival-id").val(a("#"+t.idMain+" #input-drp-arrival-id").attr("validated-date")),a("#"+t.idMain+" #input-drp-departure-id").val(a("#"+t.idMain+" #input-drp-departure-id").attr("validated-date")),b(),!1)}function W(){a("#"+t.idMain+" #input-drp-arrival-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" #input-drp-departure-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" #"+t.idStart).val(null),a("#"+t.idMain+" #"+t.idEnd).val(null),a("#"+t.idMain+" #"+t.idDuration).remove(),a("#"+t.idMain+" .ui-drp-clear-cross").remove(),a("#"+t.idMain+" .drp-start-chosen").removeClass("drp-start-chosen"),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen"),"function"==typeof d.inputsCleared&&d.inputsCleared()}function B(i,d){a(this).addClass("ui-drp-selected").addClass("drp-start"),a("#"+t.idMain+" #input-drp-arrival-id").val(i).addClass("drp-start-chosen"),a("#"+t.idMain+" #"+t.idStart).val(d)}function J(){a("#"+t.idMain+" #input-drp-arrival-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" .drp-start-chosen").removeClass("drp-start-chosen"),a("#"+t.idPopup+" .drp-start").removeClass("ui-drp-selected").removeClass("drp-start")}function V(i,d){a(this).addClass("ui-drp-selected").addClass("drp-start"),a("#"+t.idMain+" #input-drp-departure-id").val(i).addClass("drp-end-chosen"),a("#"+t.idMain+" #"+t.idEnd).val(d)}function z(){a("#"+t.idMain+" #input-drp-departure-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen"),a("#"+t.idPopup+" .drp-end").removeClass("ui-drp-selected").removeClass("drp-end")}function X(){J(),z(),a("#"+t.idPopup+" .ui-drp-range").removeClass("ui-drp-range")}function _(){s.setMonth(s.getMonth()+1);for(var i=0,d=1;d<=t.nbMonths;d++)i+=a("#"+t.idPopup+" table[index="+d+"] tr").length;i/t.nbMonths>5?a("#"+t.idPopup).animate({height:"358px"},180):a("#"+t.idPopup).animate({height:"315px"},180),a.when(a("#"+t.idPopup+" .ui-drp-table, .ui-drp-header").animate({left:"-="+t.panelWidth+"px"},250)).then(function(){a("#"+t.idPopup+" .ui-drp-board").empty(),g()})}function j(){s.setMonth(s.getMonth()-1);for(var i=0,d=-1;d<t.nbMonths-1;d++)i+=a("#"+t.idPopup+" table[index="+d+"] tr").length;i/t.nbMonths>5?a("#"+t.idPopup).animate({height:"358px"},180):a("#"+t.idPopup).animate({height:"315px"},180),a.when(a("#"+t.idPopup+" .ui-drp-table, .ui-drp-header").animate({left:"+="+t.panelWidth+"px"},250)).then(function(){a("#"+t.idPopup+" .ui-drp-board").empty(),g()})}function L(){var i=E("#"+t.idMain+" #"+t.idStart,t.processTokens,t.processSeparator);if(I(i)){var d=Y(i[0],i[1],i[2],t.dateTokens,t.dateSeparator);a("#"+t.idMain+" #input-drp-arrival-id").val(d),a("#"+t.idMain+" #input-drp-arrival-id").attr("validated-date",d),a("#"+t.idMain+" #"+t.idStart).attr("validated-date",a("#"+t.idMain+" #"+t.idStart).val())}var e=E("#"+t.idMain+" #"+t.idEnd,t.processTokens,t.processSeparator);if(I(e)){var r=Y(e[0],e[1],e[2],t.dateTokens,t.dateSeparator);a("#"+t.idMain+" #input-drp-departure-id").val(r),a("#"+t.idMain+" #input-drp-departure-id").attr("validated-date",r),a("#"+t.idMain+" #"+t.idEnd).attr("validated-date",a("#"+t.idMain+" #"+t.idEnd).val())}var n=T();1===n?a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-start-chosen"):2===n?a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-end-chosen"):3===n&&(a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-start-chosen"),a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-end-chosen")),n>0&&!0===t.durationInput&&0===a("#"+t.idMain+" #"+t.idDuration).length&&(a("#"+t.idMain).append('<input duration="true" id="'+t.idDuration+'" type="text" placeholder="'+t.placeholderDuration+'" />'),a("#"+t.idMain+" #"+t.idDuration).click(function(){h()})),n>0&&0===a("#"+t.idMain+" .ui-drp-clear-cross").length&&(a("#"+t.idMain+" .ui-drp-picto").remove(),a("#"+t.idMain).append(t.clearCross),N())}return a("#"+t.idMain).append(l),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(t.nbMonths=1,t.isMobile=!0,t.readonly=!0),t.readonly&&(a("#"+t.idMain+" #input-drp-arrival-id").attr("readonly","true"),a("#"+t.idMain+" #input-drp-departure-id").attr("readonly","true")),function(){t.initStart&&(a("#"+t.idMain+" #"+t.idStart).val(t.initStart),arr=E("#"+t.idMain+" #"+t.idStart,t.processTokens,t.processSeparator),str=Y(arr[0],arr[1],arr[2],t.dateTokens,t.dateSeparator),a("#"+t.idMain+" #input-drp-arrival-id").val(str));t.initEnd&&(a("#"+t.idMain+" #"+t.idEnd).val(t.initEnd),tab=E("#"+t.idMain+" #"+t.idEnd,t.processTokens,t.processSeparator),ptr=Y(tab[0],tab[1],tab[2],t.dateTokens,t.dateSeparator),a("#"+t.idMain+" #input-drp-departure-id").val(ptr));L()}(),a("#"+t.idMain+" input").keyup(function(i){13===i.keyCode&&a(this).attr("id")!==t.idDuration&&b()}),a("#"+t.idMain).delegate("input","keyup",function(){var i=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator);if(I(i)){var d=Y(i[0],i[1],i[2],t.processTokens,t.processSeparator);a("#"+t.idMain+" #"+t.idStart).val(d)}var e=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);if(I(e)){var r=Y(e[0],e[1],e[2],t.processTokens,t.processSeparator);a("#"+t.idMain+" #"+t.idEnd).val(r)}}),a("#"+t.idMain+" .drp-start-container, #"+t.idMain+" .ui-drp-arrow, #"+t.idMain+" .ui-drp-picto").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,h(),t.isMobile&&a(this).blur()}),a("#"+t.idMain+" .drp-end-container").click(function(){a("#"+t.idMain+" #input-drp-departure-id").focus(),o=1,h(),t.isMobile&&a(this).blur()}),{reloadInputs:L}}}(jQuery);!function(a){a.fn.dateRangePicker=function(t,d){d=a.extend({},d);var e={};e="function"==typeof dateRangePicker_setRegional?dateRangePicker_setRegional():{monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNameShort:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],dayName:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dayNameShort:["Mo","Tu","We","Th","Fr","Sa","Su"],placeholderStart:"Arrival",placeholderEnd:"Departure",placeholderDuration:"Duration",dateFormat:"DD MMM YYYY",processFormat:"MM/DD/YYYY"},t=a.extend(e,t);var r,n,p;t=a.extend({initStart:null,initEnd:null,idStart:"input-drp-start-id",idEnd:"input-drp-end-id",idDuration:"input-drp-duration-id",nameStart:"input-drp-start-name",nameEnd:"input-drp-end-name",classStart:"input-drp-start-class",classEnd:"input-drp-end-class",previousButton:'<svg width="44" height="34"><polygon points="32,17 12,17 17,12 12,17 17,22 12,17" style="stroke:grey;stroke-width:1;" /></svg>',nextButton:'<svg width="44" height="34"><polygon points="12,17 32,17 27,12 32,17 27,22 32,17" style="stroke:grey;stroke-width:1;" /></svg>',separator:'<svg class="ui-drp-arrow" width="30" height="30"><polygon points="5,15 25,15 20,10 25,15 20,20 25,15" style="stroke:grey;stroke-width:1;" /></svg>',clearCross:'<svg class="ui-drp-clear-cross" width="30" height="30"><polygon points="10,10 20,20 15,15 20,10 10,20 15,15" style="stroke:black;stroke-width:2;" /></svg>',validationCross:'<svg class="ui-drp-validation-cross" width="30" height="30"><polygon points="10,10 20,20 15,15 20,10 10,20 15,15" style="stroke:black;stroke-width:2;" /></svg>',picto:'<img src="drp-picto.png" class="ui-drp-picto">',minDate:null,maxDate:null,allowPrevious:!0,allowFuture:!0,forceDeparture:!1,durationInput:!1,readonly:!1,smartDisplay:!1,askValidation:!1,preloadedMonths:null,headerText:null,firstWeekDay:5,maxRange:28,nbMonths:2,forceDepartureSelection:!1},t),n=a(this),p={},a.each(n[0].attributes,function(a,t){p[t.name]=t.value}),r=p,a.each(t,function(i,d){a.each(r,function(a,d){i.toLowerCase()===a&&(t[i]=r[a]),"data-start"===a&&(t.initStart=r[a]),"data-end"===a&&(t.initEnd=r[a]),"min-start"===a&&(t.minDate=new Date(r[a])),"max-end"===a&&(t.maxDate=new Date(r[a]))})}),t.idMain=a(this).attr("id"),t.idPopup=t.idMain+"-ui-drp",t.idFade=t.idMain+"-ui-fade",t.dateSeparator=c(t.dateFormat),t.dateTokens=v(t.dateFormat,t.dateSeparator),t.processSeparator=c(t.processFormat),t.processTokens=v(t.processFormat,t.processSeparator),t.isMobile=!1;var o=0,s=P(),u=P(),l='<div class="drp-start-container"><input drp="true" id="input-drp-arrival-id" class="'+t.classStart+'" name="input-drp-arrival-name" type="text" placeholder="'+t.placeholderStart+'"><input id="'+t.idStart+'" name="'+t.nameStart+'" type="hidden"></div>'+t.separator+'<div class="drp-end-container"><input drp="true" id="input-drp-departure-id" class="'+t.classEnd+'" name="input-drp-departure-name" type="text" placeholder="'+t.placeholderEnd+'"><input id="'+t.idEnd+'" name="'+t.nameEnd+'" type="hidden"></div>'+t.picto;function c(a){for(var t=["/","-","."," "],i=0;i<t.length;i++)if(tab=a.split(t[i]),3===tab.length)return t[i]}function v(a,t){return a.split(t)}function h(){if(0===T()&&!0===t.forceDeparture&&(a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0),0===o?(a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-departure-id").removeClass("drp-selecting"),S("#"+t.idMain+" #input-drp-departure-id",-(t.maxRange+1))):(a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-arrival-id").removeClass("drp-selecting"),S("#"+t.idMain+" #input-drp-arrival-id",t.maxRange+1)),a("#"+t.idPopup).length)return!1;t.smartDisplay||(M("#"+t.idMain+" #input-drp-departure-id"),M("#"+t.idMain+" #input-drp-arrival-id")),function(){var i='<div id="'+t.idPopup+'" class="ui-drp-popup"><div class="ui-drp-main-header">';t.headerText&&(i+='<div class="ui-drp-main-header-text">'+t.headerText+"</div>");t.smartDisplay&&(i+='<div class="smart-display-container"><input id="smart-display-arrival-id" class="drp-smart-display" placeholder="'+t.placeholderStart+'" readonly="readonly"><input id="smart-display-departure-id" class="drp-smart-display" placeholder="'+t.placeholderEnd+'" readonly="readonly"></div>');i+='</div><div class="ui-drp-board"></div></div><div id="'+t.idFade+'" class="ui-drp-fade"></div>',a("#"+t.idMain).css({"z-index":"99999"}),a("body").append(i).addClass("drp-active"),a("#"+t.idFade).fadeIn(),a(window).resize(f),f(),t.preloadedMonths&&(C("ui-drp-main-header"),a("#"+t.idPopup+" .ui-drp-board").css({"overflow-y":"scroll","overflow-x":"hidden",height:"315px",width:"350px"}))}(),g(),function(){for(var i=0,d=0;d<t.nbMonths;d++)i+=a("#"+t.idPopup+" table[index="+d+"] tr").length;i/t.nbMonths>5?a("#"+t.idPopup).css({height:"358px"}):a("#"+t.idPopup).css({height:"315px"})}(),a("#"+t.idFade).click(function(){t.askValidation&&A()&&W(),O()}),t.smartDisplay&&function(){a("#"+t.idPopup+" #smart-display-arrival-id").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").click()}),a("#"+t.idPopup+" #smart-display-departure-id").click(function(){a("#"+t.idMain+" #input-drp-departure-id").click()}),w("#input-drp-arrival-id","#smart-display-arrival-id"),w("#input-drp-departure-id","#smart-display-departure-id");var i=a("#"+t.idPopup+" .drp-start").offset();i&&a("#"+t.idPopup+" .ui-drp-board").animate({scrollTop:i.top-a("#"+t.idPopup+" .ui-drp-panel").height()-a("#"+t.idPopup+" .ui-drp-main-header").height()},800)}(),t.askValidation&&function(){a("#"+t.idPopup+" .ui-drp-main-header").append(t.validationCross),a("#"+t.idPopup+" .ui-drp-validation-cross").click(function(){A()&&W(),O()}),a("#"+t.idPopup).append('<div class="ui-drp-main-footer">'),a("#"+t.idPopup+" .ui-drp-main-footer").append('<button class="ui-drp-main-footer-button">Valider</button>'),3!==T()&&a("#"+t.idPopup+" .ui-drp-main-footer-button").attr("disabled","disabled");a("#"+t.idPopup+" .ui-drp-main-footer-button").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").attr("validated-date",a("#"+t.idMain+" #input-drp-arrival-id").val()),a("#"+t.idMain+" #input-drp-departure-id").attr("validated-date",a("#"+t.idMain+" #input-drp-departure-id").val()),a("#"+t.idMain+" #"+t.idStart).attr("validated-date",a("#"+t.idMain+" #"+t.idStart).val()),a("#"+t.idMain+" #"+t.idEnd).attr("validated-date",a("#"+t.idMain+" #"+t.idEnd).val()),O()})}(),"function"==typeof d.openingPopup&&d.openingPopup()}function M(a){t.minDate>P()&&(s.setMonth(t.minDate.getMonth()),s.setFullYear(t.minDate.getFullYear()));var i=E(a,t.dateTokens,t.dateSeparator);if(I(i)){var d=new Date(i[2],i[1],i[0]);s.setMonth(d.getMonth()),s.setFullYear(d.getFullYear())}}function f(){var i,d,e=a("#"+t.idMain).offset();e.top+=a("#"+t.idMain).height()+10,t.panelWidth=(i=a('<div class="ui-drp-panel"></div>').appendTo("#"+t.idPopup),d=i.innerWidth(),i.remove(),d),t.preloadedMonths?a("#"+t.idPopup).fadeIn().css({top:e.top,left:e.left}):a("#"+t.idPopup).fadeIn().css({top:e.top,left:e.left,width:t.panelWidth*t.nbMonths})}function g(){if(t.preloadedMonths)for(var i=0;i<t.preloadedMonths;i++){m((e=new Date(s.getFullYear(),s.getMonth()+i)).getMonth(),e.getFullYear(),null,null)}else{!function(){if(a("#"+t.idPopup+" .ui-drp-board").append('<div class="ui-drp-next-month">'+t.nextButton),!1===t.allowPrevious){var i=new Date;if(s.getMonth()==i.getMonth()&&s.getFullYear()==i.getFullYear())return}a("#"+t.idPopup+" .ui-drp-board").append('<div class="ui-drp-previous-month">'+t.previousButton)}();for(i=-1;i<t.nbMonths+1;i++){var e;m((e=new Date(s.getFullYear(),s.getMonth()+i)).getMonth(),e.getFullYear(),i*t.panelWidth,i)}!function(){if(t.isMobile&&!t.preloadedMonths){var i,d;a("#"+t.idPopup+" .ui-drp-panel").bind("touchstart",function(a){i=a.originalEvent.changedTouches[0].pageX}),a("#"+t.idPopup+" .ui-drp-panel").bind("touchend",function(e){i&&(d=e.originalEvent.changedTouches[0].pageX,i>d+30?_():i<d-30&&a("#"+t.idPopup+" .ui-drp-previous-month").length&&j())})}a("#"+t.idPopup+" .ui-drp-previous-month").unbind("click").click(function(){a("#"+t.idPopup+" .ui-drp-previous-month").unbind("click"),j()}),a("#"+t.idPopup+" .ui-drp-next-month").unbind("click").click(function(){a("#"+t.idPopup+" .ui-drp-next-month").unbind("click"),_()})}()}a("#"+t.idPopup+" .ui-drp-today, #"+t.idPopup+" .ui-drp-default").click(function(){if(a(this).hasClass("ui-drp-out-of-range"))"function"==typeof d.clickOutOfRange&&d.clickOutOfRange();else{var i=Y(a(this).text(),a(this).attr("data-month"),a(this).attr("data-year"),t.dateTokens,t.dateSeparator),e=Y(a(this).text(),a(this).attr("data-month"),a(this).attr("data-year"),t.processTokens,t.processSeparator),r=T(),n=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),p=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator),s=new Date(n[2],n[1],n[0]),u=new Date(p[2],p[1],p[0]),l=new Date(a(this).attr("data-year"),a(this).attr("data-month"),a(this).text());1===o&&0===r&&!0===t.forceDeparture&&(o=0),(a(this).hasClass("ui-drp-default")||a(this).hasClass("ui-drp-today"))&&(0===o?(!0===t.forceDepartureSelection&&(X(),r=0),0===r?B(i,e):1===r?(J(),B(i,e)):2===r?(l.getTime()>=u.getTime()&&z(),B(i,e)):3===r&&(l.getTime()>=u.getTime()&&X(),B(i,e))):1===o&&(0===r?V(i,e):2===r?(z(),V(i,e)):1===r?(l.getTime()<=s.getTime()&&J(),V(i,e)):3===r&&(l.getTime()<=s.getTime()&&X(),V(i,e)))),x(r=T()),3===r?t.askValidation?b():O():1===r?(a("#"+t.idMain+" #input-drp-departure-id").focus(),o=1,b()):2===r&&(a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,b())}}),a("#"+t.idPopup+" .ui-drp-default, .ui-drp-today").mouseenter(function(){var i=T();if(i>0){var e=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),r=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator),n=new Date(e[2],e[1],e[0]),p=new Date(r[2],r[1],r[0]);if(1===i){if(0===o)return;var s=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],u=new Date(s[2],s[1],s[0]),l=y(e,s,0);if(l)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());e[0]++,u>n&&a("#"+t.idPopup).addClass("drp-available");for(var c=new Date(e[2],e[1],e[0]);c<=u;c.setDate(c.getDate()+1))a("#"+t.idPopup+" td[data-day="+c.getDate()+"][data-month="+c.getMonth()+"][data-year="+c.getFullYear()+"]").addClass("ui-drp-dynamicrange")}else if(2===i){if(1===o)return;var v=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],h=new Date(v[2],v[1],v[0]),M=y(r,v,1);if(M)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());r[0]--,h<p&&a("#"+t.idPopup).addClass("drp-available");for(var f=new Date(r[2],r[1],r[0]);f>=h;f.setDate(f.getDate()-1))a("#"+t.idPopup+" td[data-day="+f.getDate()+"][data-month="+f.getMonth()+"][data-year="+f.getFullYear()+"]").addClass("ui-drp-dynamicrange")}else if(3===i)if(0===o){e[0]++;var s=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],u=new Date(s[2],s[1],s[0]),l=y(r,s,1);if(l)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());u<p&&a("#"+t.idPopup).addClass("drp-available"),a(this).addClass("ui-drp-dynamicrange")}else if(1===o){r[0]--;var v=[a(this).attr("data-day"),a(this).attr("data-month"),a(this).attr("data-year")],h=new Date(v[2],v[1],v[0]),M=y(e,v,0);if(M)return a("#"+t.idPopup).addClass("drp-unavailable"),void("function"==typeof d.hoverOutOfRange&&d.hoverOutOfRange());h>n&&a("#"+t.idPopup).addClass("drp-available"),a(this).addClass("ui-drp-dynamicrange")}}}).mouseleave(function(){a("#"+t.idPopup+" .ui-drp-default, .ui-drp-today").removeClass("ui-drp-dynamicrange"),a("#"+t.idPopup).removeClass("drp-unavailable").removeClass("drp-available")}),b()}function m(i,d,e,r){var n,p=(n=new Date(d,i,1).getDay())>0?--n:6,o=D(i,d);a("#"+t.idPopup+" .ui-drp-board").append('<div class="ui-drp-panel">'),function(i,d){var e='<div class="ui-drp-header"><span class="ui-drp-month">'+t.monthName[i]+" "+d+"</span></div>";a("#"+t.idPopup+" .ui-drp-panel:last").append(e)}(i,d),null!=e?(C("ui-drp-panel:last"),a("#"+t.idPopup+" .ui-drp-panel:last").append('<div class="ui-drp-table">').css({position:"absolute",left:e}),a("#"+t.idPopup+" .ui-drp-table:last").append('<table class="ui-drp-calendar" index="'+r+'">')):a("#"+t.idPopup+" .ui-drp-panel:last").append('<div class="ui-drp-table"><table class="ui-drp-calendar"></table></div>');for(var s=1,l=((p=(p+7-t.firstWeekDay)%7)+o)/7,c=0;c<l;c++){a("#"+t.idPopup+" .ui-drp-calendar:last").append("<tr>");for(var v=0;v<=6;v++)0===c&&v<p?k(null,i,d,o,u):s>o?k(null,i,d,o,u):(k(s,i,d,o,u),s++)}}function y(a,i,d){var e=new Date(a[2],a[1],a[0]),r=new Date(i[2],i[1],i[0]),n=e;return!(0===d&&(n=n.setDate(e.getDate()+(t.maxRange+1)))>r)&&!(1===d&&(n=n.setDate(e.getDate()-(t.maxRange+1)))<r)}function D(a,t){return 11===a?31:new Date(t,a+1,0).getDate()}function P(){return new Date((new Date).toDateString())}function C(i){for(var d='<div class="ui-drp-week"><table class="ui-drp-week-table"><tr>',e=0;e<=6;e++)d+='<td class="ui-drp-week-days">'+t.dayNameShort[(e+t.firstWeekDay)%7]+"</td>";d+="</tr></table></div>",a("#"+t.idPopup+" ."+i).append(d)}function k(i,d,e,r,n){var p=null,o=new Date(e,d,i);p=null===i?'<td class="ui-drp-other-month"><span></span></td>':!1===t.allowPrevious&&o<n||t.minDate&&o<t.minDate?'<td class="ui-drp-passed" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>":!1===t.allowFuture&&o>n||t.maxDate&&o>t.maxDate?'<td class="ui-drp-future" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>":i===n.getDate()&&d===n.getMonth()&&e===n.getFullYear()?'<td class="ui-drp-today" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>":'<td class="ui-drp-default" data-day="'+i+'" data-month="'+d+'" data-year="'+e+'"><span>'+i+"</span></td>",a("#"+t.idPopup+" tr:last").append(p),1===i?a("#"+t.idPopup+" td:last").addClass("ui-drp-first-day"):i===r&&a("#"+t.idPopup+" td:last").addClass("ui-drp-last-day")}function b(){0===T()&&!0===t.forceDeparture&&(a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0),0===o?(a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-departure-id").removeClass("drp-selecting")):(a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-selecting"),a("#"+t.idMain+" #input-drp-arrival-id").removeClass("drp-selecting"));var i=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator);I(i)||(a("#"+t.idMain+" #input-drp-arrival-id").val(null),a("#"+t.idMain+" #"+t.idStart).val(null),a("#"+t.idMain+" #"+t.idDuration).val(null),a("#"+t.idMain+" .drp-start-chosen").removeClass("drp-start-chosen"));var d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);I(d)||(a("#"+t.idMain+" #input-drp-departure-id").val(null),a("#"+t.idMain+" #"+t.idEnd).val(null),a("#"+t.idMain+" #"+t.idDuration).val(null),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen")),I(i)&&I(d)&&function(i,d){var e,r,n;r=new Date(i[2],i[1],i[0]);var p=(((n=new Date(d[2],d[1],d[0]))-r)/864e5).toFixed();p<=t.maxRange?a("#"+t.idMain+" #"+t.idDuration).val(p):a("#"+t.idMain+" #"+t.idDuration).val(null),r>n&&(e=i,i=d,d=e,e=a("#"+t.idMain+" #input-drp-arrival-id").val(),a("#"+t.idMain+" #input-drp-arrival-id").val(a("#"+t.idMain+" #input-drp-departure-id").val()),a("#"+t.idMain+" #input-drp-departure-id").val(e),e=a("#"+t.idMain+" #"+t.idStart).val(),a("#"+t.idMain+" #"+t.idStart).val(a("#"+t.idMain+" #"+t.idEnd).val()),a("#"+t.idMain+" #"+t.idEnd).val(e)),y(i,d,0)&&(a("#"+t.idMain+" #input-drp-departure-id").val(null),a("#"+t.idMain+" #"+t.idEnd).val(null),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen"))}(i,d);var e=T();if(e>0&&!0===t.durationInput&&0===a("#"+t.idMain+" #"+t.idDuration).length?(a("#"+t.idMain).append('<input duration="true" id="'+t.idDuration+'" type="text" placeholder="'+t.placeholderDuration+'" />'),a("#"+t.idMain+" #"+t.idDuration).click(function(){h()})):0===e&&a("#"+t.idMain+" #"+t.idDuration).remove(),e>0&&0===a("#"+t.idMain+" .ui-drp-clear-cross").length?(a("#"+t.idMain+" .ui-drp-picto").remove(),a("#"+t.idMain).append(t.clearCross),N()):0===e&&(a("#"+t.idMain+" .ui-drp-clear-cross").remove(),a(".ui-drp-picto").length||(a("#"+t.idMain).append(t.picto),a("#"+t.idMain+" .ui-drp-picto").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,h()}))),e>0&&(1===o?S("#"+t.idMain+" #input-drp-arrival-id",t.maxRange+1):S("#"+t.idMain+" #input-drp-departure-id",-(t.maxRange+1))),3===e?a("#"+t.idPopup).addClass("drp-selected"):a("#"+t.idPopup).removeClass("drp-selected"),a("#"+t.idMain+" #"+t.idDuration).unbind("keyup").keyup(function(t){13===t.keyCode&&(R(a(this).val()),x(e))}).focusout(function(){a(this).unbind("focusout"),R(a(this).val()),x(e)}),a("#"+t.idPopup+" .ui-drp-range").removeClass("ui-drp-range"),a("#"+t.idPopup+" .ui-drp-dynamicrange").removeClass("ui-drp-dynamicrange"),a("#"+t.idPopup+" .ui-drp-selected").removeClass("drp-end").removeClass("drp-start").removeClass("ui-drp-selected"),(a("#"+t.idPopup+" td[data-day="+i[0]+"][data-month="+i[1]+"][data-year="+i[2]+"]").hasClass("ui-drp-default")||a("#"+t.idPopup+" td[data-day="+i[0]+"][data-month="+i[1]+"][data-year="+i[2]+"]").hasClass("ui-drp-today"))&&a("#"+t.idPopup+" td[data-day="+i[0]+"][data-month="+i[1]+"][data-year="+i[2]+"]").addClass("ui-drp-selected").addClass("drp-start"),(a("#"+t.idPopup+" td[data-day="+d[0]+"][data-month="+d[1]+"][data-year="+d[2]+"]").hasClass("ui-drp-default")||a("#"+t.idPopup+" td[data-day="+d[0]+"][data-month="+d[1]+"][data-year="+d[2]+"]").hasClass("ui-drp-today"))&&a("#"+t.idPopup+" td[data-day="+d[0]+"][data-month="+d[1]+"][data-year="+d[2]+"]").addClass("ui-drp-selected").addClass("drp-end"),3===e){i[0]++;for(var r=new Date(d[2],d[1],d[0]),n=new Date(i[2],i[1],i[0]);n<r;n.setDate(n.getDate()+1))a("#"+t.idPopup+" td[data-day="+n.getDate()+"][data-month="+n.getMonth()+"][data-year="+n.getFullYear()+"]").addClass("ui-drp-range")}}function S(i,d){if(""!==a(i).val()){var e=E(i,t.dateTokens,t.dateSeparator),r=new Date(e[2],e[1],e[0]);if(d>0){a("#"+t.idPopup+" td").addClass("ui-drp-out-of-range");for(var n=0;n<d;n++)a("#"+t.idPopup+" td[data-day="+r.getDate()+"][data-month="+r.getMonth()+"][data-year="+r.getFullYear()+"]").removeClass("ui-drp-out-of-range"),r=new Date(r.setDate(r.getDate()+1))}else{a("#"+t.idPopup+" td").addClass("ui-drp-out-of-range");for(n=0;n>d;n--)a("#"+t.idPopup+" td[data-day="+r.getDate()+"][data-month="+r.getMonth()+"][data-year="+r.getFullYear()+"]").removeClass("ui-drp-out-of-range"),r=new Date(r.setDate(r.getDate()-1))}!function(i){if(""===a("#"+t.idMain+" #input-drp-arrival-id").val()&&""===a("#"+t.idMain+" #input-drp-departure-id").val())return;if(i>0){var d=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),e=new Date(d[2],d[1],d[0]);a("#"+t.idPopup+" td").filter(function(){return a(this).attr("data-year")<e.getFullYear()||(a(this).attr("data-month")<e.getMonth()||a(this).attr("data-year")==e.getFullYear()&&a(this).attr("data-month")==e.getMonth()&&a(this).attr("data-day")<e.getDate())}).removeClass("ui-drp-out-of-range")}else{var d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator),e=new Date(d[2],d[1],d[0]);a("#"+t.idPopup+" td.ui-drp-default").filter(function(){return a(this).attr("data-year")>e.getFullYear()||(parseInt(a(this).attr("data-month"))>parseInt(e.getMonth())||a(this).attr("data-year")==e.getFullYear()&&a(this).attr("data-month")==e.getMonth()&&a(this).attr("data-day")>e.getDate())}).removeClass("ui-drp-out-of-range")}}(d)}}function w(i,d){var e=a("#"+t.idMain+" "+i).val();e?a("#"+t.idPopup+" "+d).val(e).addClass("drp-smart-select"):a("#"+t.idPopup+" "+d).val(e).removeClass("drp-smart-select")}function x(i){1===i&&(t.smartDisplay&&w("#input-drp-arrival-id","#smart-display-arrival-id"),"function"==typeof d.selectedStart&&d.selectedStart()),2===i&&(t.smartDisplay&&w("#input-drp-departure-id","#smart-display-departure-id"),"function"==typeof d.selectedEnd&&d.selectedEnd()),3===i&&(t.smartDisplay&&(w("#input-drp-arrival-id","#smart-display-arrival-id"),w("#input-drp-departure-id","#smart-display-departure-id")),t.askValidation&&a("#"+t.idPopup+" .ui-drp-main-footer-button").removeAttr("disabled"),"function"==typeof d.selectedRange&&d.selectedRange())}function T(){var a,i=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator),d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);return 3!==i.length&&3!==d.length?a=0:3===i.length&&3!==d.length?a=1:3!==i.length&&3===d.length?a=2:3===i.length&&3===d.length&&(a=3),a}function F(a){return parseInt(a)<10?"0"+a:a}function Y(a,d,e,r,n){var p=new Array;for(i=0;i<r.length;i++)"YYYY"===r[i]?p[i]=parseInt(e):"YY"===r[i]?p[i]=parseInt(e)-2e3:"M"===r[i]?p[i]=parseInt(d)+1:"MM"===r[i]?p[i]=F(parseInt(d)+1):"MMM"===r[i]?p[i]=t.monthNameShort[parseInt(d)]:"MMMM"===r[i]?p[i]=t.monthName[parseInt(d)]:"D"===r[i]?p[i]=parseInt(a):"DD"===r[i]&&(p[i]=F(parseInt(a)));return p[0]+n+p[1]+n+p[2]}function E(i,d,e){var r=a(i).val(),n=r.split(e);if(3===n.length){for(var p=new Array,o=0;o<n.length;o++)"YYYY"===d[o]?p[2]=parseInt(n[o]):"YY"===d[o]?p[2]=2e3+parseInt(n[o]):"M"===d[o]||"MM"===d[o]?p[1]=parseInt(n[o])-1:"MMM"===d[o]?p[1]=t.monthNameShort.indexOf(n[o]):"MMMM"===d[o]?p[1]=t.monthName.indexOf(n[o]):"D"!==d[o]&&"DD"!==d[o]||(p[0]=parseInt(n[o]));return p}return r}function I(a){if(3!==a.length||isNaN(a[0])||isNaN(a[1])||isNaN(a[2]))return!1;if(a[1]<0||a[1]>11)return!1;var i=D(a[1],a[2]);if(a[0]<1||a[0]>i)return!1;var d=new Date(a[2],a[1],a[0]);return!(!1===t.allowPrevious&&d<u)&&(!(!1===t.allowFuture&&d>u)&&(!(t.minDate&&d<t.minDate)&&!(t.maxDate&&d>t.maxDate)))}function O(){b(),"function"==typeof d.closingPopup&&d.closingPopup(),a("body").removeClass("drp-active"),a("#"+t.idMain+":focus").blur(),a("#"+t.idMain+" #input-drp-arrival-id").removeClass("drp-selecting"),a("#"+t.idMain+" #input-drp-departure-id").removeClass("drp-selecting"),a("#"+t.idFade+", #"+t.idPopup).fadeOut(function(){a("#"+t.idMain).css({"z-index":"initial"}),a("#"+t.idPopup).remove(),a("#"+t.idFade).remove()})}function R(i){if(isNaN(i)||parseInt(i)<0||parseInt(i)>t.maxRange)a("#"+t.idMain+" #"+t.idDuration).val(null);else{if(1===o){var d=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator);if((e=new Date(d[2],d[1],d[0])).setDate(e.getDate()+parseInt(i)),!I([e.getFullYear(),e.getMonth(),e.getDate()]))return void a("#"+t.idMain+" #"+t.idDuration).val(null).removeClass("drp-start-chosen");a("#"+t.idMain+" #input-drp-departure-id").val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.dateTokens,t.dateSeparator)).addClass("drp-end-chosen"),a("#"+t.idMain+" #"+t.idEnd).val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.processTokens,t.processSeparator))}else{var e;d=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);if((e=new Date(d[2],d[1],d[0])).setDate(e.getDate()-parseInt(i)),!I([e.getFullYear(),e.getMonth(),e.getDate()]))return void a("#"+t.idMain+" #"+t.idDuration).val(null).removeClass("drp-start-chosen");a("#"+t.idMain+" #input-drp-arrival-id").val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.dateTokens,t.dateSeparator)).addClass("drp-start-chosen"),a("#"+t.idMain+" #"+t.idStart).val(Y(e.getDate(),e.getMonth(),e.getFullYear(),t.processTokens,t.processSeparator))}b()}}function N(){a("#"+t.idMain+" .ui-drp-clear-cross").unbind("click").click(function(){W(),a("#"+t.idPopup+" .ui-drp-selected").removeClass("drp-start").removeClass("drp-end").removeClass("ui-drp-selected"),a("#"+t.idPopup+" .ui-drp-range").removeClass("ui-drp-range"),a("#"+t.idPopup+" .ui-drp-out-of-range").removeClass("ui-drp-out-of-range"),a("#"+t.idMain).append(t.picto),a("#"+t.idMain+" .ui-drp-picto").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,h()}),a("#"+t.idPopup).length&&b()})}function A(){var i=a("#"+t.idMain+" #"+t.idStart).attr("validated-date"),d=a("#"+t.idMain+" #"+t.idEnd).attr("validated-date");return!i&&!d||(a("#"+t.idMain+" #"+t.idStart).val(i),a("#"+t.idMain+" #"+t.idEnd).val(d),a("#"+t.idMain+" #input-drp-arrival-id").val(a("#"+t.idMain+" #input-drp-arrival-id").attr("validated-date")),a("#"+t.idMain+" #input-drp-departure-id").val(a("#"+t.idMain+" #input-drp-departure-id").attr("validated-date")),b(),!1)}function W(){a("#"+t.idMain+" #input-drp-arrival-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" #input-drp-departure-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" #"+t.idStart).val(null),a("#"+t.idMain+" #"+t.idEnd).val(null),a("#"+t.idMain+" #"+t.idDuration).remove(),a("#"+t.idMain+" .ui-drp-clear-cross").remove(),a("#"+t.idMain+" .drp-start-chosen").removeClass("drp-start-chosen"),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen"),"function"==typeof d.inputsCleared&&d.inputsCleared()}function B(i,d){a(this).addClass("ui-drp-selected").addClass("drp-start"),a("#"+t.idMain+" #input-drp-arrival-id").val(i).addClass("drp-start-chosen"),a("#"+t.idMain+" #"+t.idStart).val(d)}function J(){a("#"+t.idMain+" #input-drp-arrival-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" .drp-start-chosen").removeClass("drp-start-chosen"),a("#"+t.idPopup+" .drp-start").removeClass("ui-drp-selected").removeClass("drp-start")}function V(i,d){a(this).addClass("ui-drp-selected").addClass("drp-start"),a("#"+t.idMain+" #input-drp-departure-id").val(i).addClass("drp-end-chosen"),a("#"+t.idMain+" #"+t.idEnd).val(d)}function z(){a("#"+t.idMain+" #input-drp-departure-id").val(null).removeAttr("validated-date"),a("#"+t.idMain+" .drp-end-chosen").removeClass("drp-end-chosen"),a("#"+t.idPopup+" .drp-end").removeClass("ui-drp-selected").removeClass("drp-end")}function X(){J(),z(),a("#"+t.idPopup+" .ui-drp-range").removeClass("ui-drp-range")}function _(){s.setMonth(s.getMonth()+1);for(var i=0,d=1;d<=t.nbMonths;d++)i+=a("#"+t.idPopup+" table[index="+d+"] tr").length;i/t.nbMonths>5?a("#"+t.idPopup).animate({height:"358px"},180):a("#"+t.idPopup).animate({height:"315px"},180),a.when(a("#"+t.idPopup+" .ui-drp-table, .ui-drp-header").animate({left:"-="+t.panelWidth+"px"},250)).then(function(){a("#"+t.idPopup+" .ui-drp-board").empty(),g()})}function j(){s.setMonth(s.getMonth()-1);for(var i=0,d=-1;d<t.nbMonths-1;d++)i+=a("#"+t.idPopup+" table[index="+d+"] tr").length;i/t.nbMonths>5?a("#"+t.idPopup).animate({height:"358px"},180):a("#"+t.idPopup).animate({height:"315px"},180),a.when(a("#"+t.idPopup+" .ui-drp-table, .ui-drp-header").animate({left:"+="+t.panelWidth+"px"},250)).then(function(){a("#"+t.idPopup+" .ui-drp-board").empty(),g()})}function L(){var i=E("#"+t.idMain+" #"+t.idStart,t.processTokens,t.processSeparator);if(I(i)){var d=Y(i[0],i[1],i[2],t.dateTokens,t.dateSeparator);a("#"+t.idMain+" #input-drp-arrival-id").val(d),a("#"+t.idMain+" #input-drp-arrival-id").attr("validated-date",d),a("#"+t.idMain+" #"+t.idStart).attr("validated-date",a("#"+t.idMain+" #"+t.idStart).val())}var e=E("#"+t.idMain+" #"+t.idEnd,t.processTokens,t.processSeparator);if(I(e)){var r=Y(e[0],e[1],e[2],t.dateTokens,t.dateSeparator);a("#"+t.idMain+" #input-drp-departure-id").val(r),a("#"+t.idMain+" #input-drp-departure-id").attr("validated-date",r),a("#"+t.idMain+" #"+t.idEnd).attr("validated-date",a("#"+t.idMain+" #"+t.idEnd).val())}var n=T();1===n?a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-start-chosen"):2===n?a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-end-chosen"):3===n&&(a("#"+t.idMain+" #input-drp-arrival-id").addClass("drp-start-chosen"),a("#"+t.idMain+" #input-drp-departure-id").addClass("drp-end-chosen")),n>0&&!0===t.durationInput&&0===a("#"+t.idMain+" #"+t.idDuration).length&&(a("#"+t.idMain).append('<input duration="true" id="'+t.idDuration+'" type="text" placeholder="'+t.placeholderDuration+'" />'),a("#"+t.idMain+" #"+t.idDuration).click(function(){h()})),n>0&&0===a("#"+t.idMain+" .ui-drp-clear-cross").length&&(a("#"+t.idMain+" .ui-drp-picto").remove(),a("#"+t.idMain).append(t.clearCross),N())}return a("#"+t.idMain).append(l),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(t.nbMonths=1,t.isMobile=!0,t.readonly=!0),t.readonly&&(a("#"+t.idMain+" #input-drp-arrival-id").attr("readonly","true"),a("#"+t.idMain+" #input-drp-departure-id").attr("readonly","true")),function(){t.initStart&&(a("#"+t.idMain+" #"+t.idStart).val(t.initStart),arr=E("#"+t.idMain+" #"+t.idStart,t.processTokens,t.processSeparator),str=Y(arr[0],arr[1],arr[2],t.dateTokens,t.dateSeparator),a("#"+t.idMain+" #input-drp-arrival-id").val(str));t.initEnd&&(a("#"+t.idMain+" #"+t.idEnd).val(t.initEnd),tab=E("#"+t.idMain+" #"+t.idEnd,t.processTokens,t.processSeparator),ptr=Y(tab[0],tab[1],tab[2],t.dateTokens,t.dateSeparator),a("#"+t.idMain+" #input-drp-departure-id").val(ptr));L()}(),a("#"+t.idMain+" input").keyup(function(i){13===i.keyCode&&a(this).attr("id")!==t.idDuration&&b()}),a("#"+t.idMain).delegate("input","keyup",function(){var i=E("#"+t.idMain+" #input-drp-arrival-id",t.dateTokens,t.dateSeparator);if(I(i)){var d=Y(i[0],i[1],i[2],t.processTokens,t.processSeparator);a("#"+t.idMain+" #"+t.idStart).val(d)}var e=E("#"+t.idMain+" #input-drp-departure-id",t.dateTokens,t.dateSeparator);if(I(e)){var r=Y(e[0],e[1],e[2],t.processTokens,t.processSeparator);a("#"+t.idMain+" #"+t.idEnd).val(r)}}),a("#"+t.idMain+" .drp-start-container, #"+t.idMain+" .ui-drp-arrow, #"+t.idMain+" .ui-drp-picto").click(function(){a("#"+t.idMain+" #input-drp-arrival-id").focus(),o=0,h(),t.isMobile&&a(this).blur()}),a("#"+t.idMain+" .drp-end-container").click(function(){a("#"+t.idMain+" #input-drp-departure-id").focus(),o=1,h(),t.isMobile&&a(this).blur()}),{reloadInputs:L}}}(jQuery);